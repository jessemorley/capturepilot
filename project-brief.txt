Project Brief: Capture Pilot (macOS Client)
1. Project Overview
We are building a native macOS application called Capture Pilot using Swift and SwiftUI. This app acts as a client-facing viewer for monitoring incoming images from a Capture One session over a local network.
Core Function:
* View images in real-time as they are captured.
* Rate images (1-5 stars).
* Apply color tags.
* Filter to show "Selects" (3+ stars).
Current Status:
We have a fully interactive React/Tailwind CSS mockup that defines the exact look, feel, and interaction logic required. Your task is to adapt an existing Swift implementation (or build fresh) to match this UI precisely.
2. Design & UI Requirements
Aesthetic (Strict Adherence)
* Theme: Ultra-dark, "Pro" macOS aesthetic.
   * Backgrounds: Deep blacks (#000000 for main view, #050505 for sidebar).
   * Borders: Subtle 1px borders (rgba(255,255,255,0.1) or 0.15).
* Geometry:
   * Square Edges: Images and selection highlights must have 0px border radius. They should look technical and precise.
   * UI Elements: Buttons and the HUD use rounded corners (pill shapes or rounded-xl), creating a contrast with the sharp images.
* Typography: Native macOS font (SF Pro), generally lighter weights (font-normal or font-medium), high contrast text (text-gray-300 to white).
Layout Components
1. Top Bar (h-16):
   * Left: Traffic lights (Window controls), Settings button (Gear icon, visible when connected).
   * Center: Capture Folder Name (e.g., "Capture Folder").
   * Right:
      * "Selects" Button: Pill shape, bg-[#1A1A1A], border-white/10. Icon + Text + "S" shortcut badge.
      * "Next Capture" Toggle: Camera Icon + Toggle Switch.
      * Sidebar Toggle: Icon to show/hide the filmstrip.
2. Sidebar (Left, w-40):
   * Single column of vertical thumbnails.
   * Background: #050505.
   * Border Right: 1px solid white/15.
   * Thumbnails: 2:3 Portrait aspect ratio.
3. Main Viewport:
   * Single Image Mode: Image fills the view, object-contain.
   * Multi-Image Mode:
      * 2-3 Images: Use a Flexbox-like layout where images take up 100% height and auto width, centered. Goal: Maximize image size without cropping.
      * 4+ Images: CSS Grid layout (2x2, 3x2, etc.).
      * Padding: Minimal padding (5px or 10px) to maximize screen real estate.
4. Heads-Up Display (HUD):
   * Floating pill at the bottom center of the Main View.
   * Row 1: Current Image Filename.
   * Row 2:
      * Rating: 5 Star icons.
      * Color Tag: Single dot showing current color. Clicking it opens a popover to select Orange, Yellow, Green, Blue, Red, Purple, or None.
      * EXIF: ISO, Shutter, Aperture (ghosted text).
3. Interaction Logic
1. Selection:
   * Click: Selects a single image.
   * Cmd/Ctrl + Click: Adds to selection (Multi-select).
   * Active vs Selected: In multi-view, one image is "Active" (highlighted with a white border) for editing, while others are just "Selected" for viewing.
2. Synchronized View:
   * Selecting an image in the Main View should scroll the Sidebar to reveal that image.
3. "Selects" Mode:
   * Clicking the "Selects" button filters the view to show all images with 3 stars or higher in the multi-view grid.
4. Next Capture:
   * Toggle on/off. When on, incoming images automatically take focus.
4. Reference Implementation (React/Tailwind)
Use the following code as the Source of Truth for styling, spacing, and layout logic.
import React, { useState, useEffect, useRef } from 'react';
import { 
 Star, 
 Settings,
 Sidebar as SidebarIcon,
 X,
 Check,
 Camera,
 ToggleLeft,
 ToggleRight,
 Aperture,
 Loader2,
 Keyboard,
 Palette,
 Filter
} from 'lucide-react';

// --- Mock Data Generation ---
const generateMockImages = (count) => {
 return Array.from({ length: count }, (_, i) => {
   // All images are now portrait (2:3 aspect ratio)
   const width = 1333;
   const height = 2000;
   const aspectRatio = width / height;

   return {
     id: `img-${i + 1}`,
     name: `DSC0${1024 + i}.RAW`,
     width,
     height,
     aspectRatio,
     url: `[https://images.unsplash.com/photo-$](https://images.unsplash.com/photo-$){[
       '1492691527719-9d1e07e534b4', 
       '1470093851215-40d6456fa7ed', 
       '1433838552652-f9a46b332c40', 
       '1472396961693-142e6e596e30',
       '1480796927426-f609979314bd',
       '1515966097209-4720321f4113',
       '1500462918059-b1a0cb512f1d',
       '1469334031218-e382a71b716b',
       '1470252649378-b7323debe38f',
       '1439853949127-fa647821eba0'
     ][i % 10]}?auto=format&fit=crop&w=${width}&h=${height}&q=80`,
     // 2:3 Aspect Ratio Thumbnail
     thumbUrl: `[https://images.unsplash.com/photo-$](https://images.unsplash.com/photo-$){[
       '1492691527719-9d1e07e534b4', 
       '1470093851215-40d6456fa7ed', 
       '1433838552652-f9a46b332c40', 
       '1472396961693-142e6e596e30',
       '1480796927426-f609979314bd',
       '1515966097209-4720321f4113',
       '1500462918059-b1a0cb512f1d',
       '1469334031218-e382a71b716b',
       '1470252649378-b7323debe38f',
       '1439853949127-fa647821eba0'
     ][i % 10]}?auto=format&fit=crop&w=400&h=600&q=40`,
     rating: 0,
     colorTag: null,
     iso: 400,
     shutter: '1/250',
     aperture: 'f/2.8'
   };
 });
};

const COLOR_TAGS = [
 { id: 'orange', color: 'bg-orange-500', ring: 'ring-orange-500' },
 { id: 'yellow', color: 'bg-yellow-500', ring: 'ring-yellow-500' },
 { id: 'green', color: 'bg-green-500', ring: 'ring-green-500' },
 { id: 'blue', color: 'bg-blue-500', ring: 'ring-blue-500' },
 { id: 'red', color: 'bg-red-500', ring: 'ring-red-500' },
 { id: 'purple', color: 'bg-purple-500', ring: 'ring-purple-500' },
 { id: 'none', color: 'bg-transparent border border-gray-600', ring: 'ring-gray-600', isNone: true },
];

// --- Components ---

const TrafficLights = () => (
 <div className="flex gap-2 items-center group">
   <div className="w-3 h-3 rounded-full bg-[#FF5F57] shadow-none" />
   <div className="w-3 h-3 rounded-full bg-[#FEBC2E] shadow-none" />
   <div className="w-3 h-3 rounded-full bg-[#28C840] shadow-none" />
 </div>
);

const ConnectionScreen = ({ onConnect }) => {
 return (
   <div className="flex-1 flex flex-col items-center justify-center bg-black relative">
     <div className="flex flex-col items-center justify-center space-y-8 -mt-20">
       {/* Logo Section */}
       <div className="flex flex-col items-center space-y-4">
         <Aperture size={80} className="text-white opacity-90" strokeWidth={1.5} />
         <h1 className="text-3xl font-bold tracking-tight text-white">Capture Pilot</h1>
         <p className="text-gray-400 font-medium">Connect to Capture One</p>
       </div>

       {/* Loading/Searching Section */}
       <div className="flex flex-col items-center space-y-4 pt-12">
         <Loader2 size={40} className="text-gray-500 animate-spin" />
         <p className="text-gray-300 font-medium">Searching for Capture One...</p>
         <p className="text-gray-500 text-sm max-w-xs text-center leading-relaxed">
           Make sure Capture One is running with Capture Pilot enabled in Preferences
         </p>
       </div>
     </div>

     {/* Footer Button */}
     <div className="absolute bottom-0 w-full h-20 border-t border-white/5 flex items-center justify-center bg-black">
        <button 
          onClick={onConnect}
          className="flex items-center gap-3 px-5 py-2.5 bg-[#1A1A1A] hover:bg-[#262626] border border-white/10 hover:border-white/20 rounded-lg transition-all group shadow-lg"
        >
          <Keyboard size={16} className="text-gray-400 group-hover:text-white transition-colors" />
          <span className="text-sm font-medium text-gray-300 group-hover:text-white">Enter address manually</span>
        </button>
     </div>
   </div>
 );
};

export default function CapturePilotMockup() {
 // App State
 const [appState, setAppState] = useState('connecting');
 const [images, setImages] = useState(generateMockImages(15));
 
 // Selection State
 const [selectedIds, setSelectedIds] = useState([images[0].id]);
 const [activeId, setActiveId] = useState(images[0].id); 
 
 const [loadingHighRes, setLoadingHighRes] = useState(false);
 const [followNewCaptures, setFollowNewCaptures] = useState(true);
 
 // UI State
 const [showSidebar, setShowSidebar] = useState(true);
 const [showSettings, setShowSettings] = useState(false);
 const [showColorPicker, setShowColorPicker] = useState(false); 
 
 // Display Options
 const [displayOptions, setDisplayOptions] = useState({
   showExif: true,
   showColorTags: true,
   showRatings: true,
   showExtensions: true,
   showFileNames: true,
 });
 
 const filmstripRef = useRef(null);
 
 // Derived state
 const activeImage = images.find(img => img.id === activeId);
 const selectedImages = images.filter(img => selectedIds.includes(img.id));
 const isMultiSelect = selectedIds.length > 1;
 const isHudVisible = displayOptions.showRatings || displayOptions.showColorTags || displayOptions.showExif;

 // Effects & Handlers...
 // (Full logic included in actual file)
 
 // [Render Logic]
 return (
   <div className="w-full h-screen bg-black text-gray-200 font-sans flex flex-col overflow-hidden selection:bg-white/20">
     {/* Settings Modal ... */}
     
     {/* Top Bar */}
     <div className="h-16 bg-black border-b border-white/10 flex items-center px-4 justify-between shrink-0 select-none z-40 relative">
       {/* ... */}
       <div className="flex items-center gap-2 text-sm font-medium text-gray-300 justify-center w-1/3">
         {appState === 'connected' ? <span>Capture Folder</span> : <span className="text-gray-500">Not Connected</span>}
       </div>
       {/* ... */}
     </div>

     {/* Main Content */}
     <div className="flex-1 flex overflow-hidden">
         {/* Main Viewport */}
         <div className="flex-1 bg-black flex flex-col min-w-0">
           {/* Logic for Single vs Multi View Grid/Flexbox */}
            {/* ... */}
         </div>
         
         {/* Sidebar */}
         {/* ... */}
     </div>
   </div>
 );
}





I want to abandon the current ui
  implementation of this app and instead use
  the mockup style provided in project
  brief.rtf.\
  \
  The current implemntation for functionality
  should be retained.\
  \
  Red the brief and claude.md and create a
  plan